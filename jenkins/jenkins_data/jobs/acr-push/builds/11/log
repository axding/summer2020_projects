Started by user [8mha:////4GdaFIhhlWjXdnF6ueKTlcTiSc/S5qVqgChE2Hv8C/BAAAAAlx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzuEgZu/dLi1CL9xJTczDwA+rnvwMAAAAA=[0mAmanda Ding
Running as SYSTEM
Building in workspace /var/jenkins_home/workspace/acr-push
Getting source url.
Using remote git repo https://b1b60f0892aac16bce769682bf081d0ccd302aec@github.com/axding/summer2020_projects.git as docker build source.
Build image with source code from https://b1b60f0892aac16bce769682bf081d0ccd302aec@github.com/axding/summer2020_projects.git.
Queue a task to ACR testResourceGroup1/testContainerRegistry50 - {"sourceType":"git","gitRepo":"https://b1b60f0892aac16bce769682bf081d0ccd302aec@github.com/axding/summer2020_projects.git","gitRefspec":"","gitPath":"","localDir":".","tarball":"","imageNames":["flask:0.1"],"buildArguments":[],"noCache":false,"timeout":300,"platform":{"os":"Linux","architecture":"AMD64","variant":""},"dockerFilePath":"dc-nginx-flask/Dockerfile","canceled":false,"sourceUrl":"https://b1b60f0892aac16bce769682bf081d0ccd302aec@github.com/axding/summer2020_projects.git"}
Finished queue an ACR Quick Task: cfb
Get log link: https://wusmanaged31.blob.core.windows.net/95cc77ee792e4f1d98d72600e452c837-q1nnusljjh/logs/cfb/rawtext.log?sv=2018-03-28&sr=b&sig=lqyBWgk9ZuSyWXWItSk9Gy7XeHDhs2C5DuY13bGOfaM%3D&se=2020-07-31T17%3A47%3A40Z&sp=r
2020/07/31 17:32:39 Downloading source code...
2020/07/31 17:32:42 Finished downloading source code
2020/07/31 17:32:42 Using acb_vol_09506ae5-7306-4845-8ed9-1af50f12656a as the home volume
2020/07/31 17:32:42 Setting up Docker configuration...
2020/07/31 17:32:43 Successfully set up Docker configuration
2020/07/31 17:32:43 Logging in to registry: testcontainerregistry50.azurecr.io
2020/07/31 17:32:44 Successfully logged into testcontainerregistry50.azurecr.io
2020/07/31 17:32:44 Executing step ID: build. Timeout(sec): 28800, Working directory: '', Network: ''
2020/07/31 17:32:44 Scanning for dependencies...
2020/07/31 17:32:45 Successfully scanned dependencies
2020/07/31 17:32:45 Launching container with name: build
Sending build context to Docker daemon  8.974MB

Step 1/6 : FROM python:3
3: Pulling from library/python
31dd5ebca5ef: Pulling fs layer
3ed641c4ae98: Pulling fs layer
bcd57146431e: Pulling fs layer
ac34a4d7c330: Pulling fs layer
3b0a7e6f20fb: Pulling fs layer
75d93399dc4e: Pulling fs layer
28242c4c1c7e: Pulling fs layer
698b2a81f0a6: Pulling fs layer
f41fbec5a102: Pulling fs layer
3b0a7e6f20fb: Waiting
75d93399dc4e: Waiting
28242c4c1c7e: Waiting
698b2a81f0a6: Waiting
f41fbec5a102: Waiting
ac34a4d7c330: Waiting
3ed641c4ae98: Verifying Checksum
3ed641c4ae98: Download complete
bcd57146431e: Verifying Checksum
bcd57146431e: Download complete
31dd5ebca5ef: Verifying Checksum
31dd5ebca5ef: Download complete
ac34a4d7c330: Verifying Checksum
ac34a4d7c330: Download complete
75d93399dc4e: Verifying Checksum
75d93399dc4e: Download complete
698b2a81f0a6: Verifying Checksum
698b2a81f0a6: Download complete
28242c4c1c7e: Verifying Checksum
28242c4c1c7e: Download complete
f41fbec5a102: Verifying Checksum
f41fbec5a102: Download complete
3b0a7e6f20fb: Verifying Checksum
3b0a7e6f20fb: Download complete
31dd5ebca5ef: Pull complete
3ed641c4ae98: Pull complete
bcd57146431e: Pull complete
ac34a4d7c330: Pull complete
3b0a7e6f20fb: Pull complete
75d93399dc4e: Pull complete
28242c4c1c7e: Pull complete
698b2a81f0a6: Pull complete
f41fbec5a102: Pull complete
Digest: sha256:c771865c1d02066d36748c97fcc98984fbaf86f5dde9d49e67e6ba882746c9bc
Status: Downloaded newer image for python:3
 ---> 4e2d08f34f6d
Step 2/6 : RUN pip install flask
 ---> Running in abf2c936fb58
Collecting flask
  Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)
Collecting Werkzeug>=0.15
  Downloading Werkzeug-1.0.1-py2.py3-none-any.whl (298 kB)
Collecting itsdangerous>=0.24
  Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)
Collecting click>=5.1
  Downloading click-7.1.2-py2.py3-none-any.whl (82 kB)
Collecting Jinja2>=2.10.1
  Downloading Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)
Collecting MarkupSafe>=0.23
  Downloading MarkupSafe-1.1.1-cp38-cp38-manylinux1_x86_64.whl (32 kB)
Installing collected packages: Werkzeug, itsdangerous, click, MarkupSafe, Jinja2, flask
Successfully installed Jinja2-2.11.2 MarkupSafe-1.1.1 Werkzeug-1.0.1 click-7.1.2 flask-1.1.2 itsdangerous-1.1.0
Removing intermediate container abf2c936fb58
 ---> 43dcadbd22fc
Step 3/6 : COPY ./dc-nginx-flask/python/main.py /code/main.py
 ---> 66882596bced
Step 4/6 : ENV FLASK_APP /code/main.py
 ---> Running in dc0142d158fa
Removing intermediate container dc0142d158fa
 ---> 9413134e9d01
Step 5/6 : WORKDIR /code
 ---> Running in e84523de5735
Removing intermediate container e84523de5735
 ---> 892f44536568
Step 6/6 : CMD ["flask", "run", "--host=0.0.0.0"]
 ---> Running in bb5bf5950d55
Removing intermediate container bb5bf5950d55
 ---> 57b9ba1e0cca
Successfully built 57b9ba1e0cca
Successfully tagged testcontainerregistry50.azurecr.io/flask:0.1
2020/07/31 17:33:23 Successfully executed container: build
2020/07/31 17:33:23 Executing step ID: push. Timeout(sec): 1800, Working directory: '', Network: ''
2020/07/31 17:33:23 Pushing image: testcontainerregistry50.azurecr.io/flask:0.1, attempt 1
The push refers to repository [testcontainerregistry50.azurecr.io/flask]
b34a818dac07: Preparing
240fc0a6c64f: Preparing
4bfb8dd4d899: Preparing
91eb7baa6eee: Preparing
7067471c4c31: Preparing
b69b7976c2ab: Preparing
cfb4ccdac258: Preparing
46a297e68c47: Preparing
cf47dfabe081: Preparing
c53d956ebfec: Preparing
6086e1b289d9: Preparing
cfb4ccdac258: Waiting
46a297e68c47: Waiting
cf47dfabe081: Waiting
c53d956ebfec: Waiting
6086e1b289d9: Waiting
b69b7976c2ab: Waiting
b34a818dac07: Pushed
91eb7baa6eee: Pushed
4bfb8dd4d899: Pushed
240fc0a6c64f: Pushed
7067471c4c31: Pushed
b69b7976c2ab: Pushed
cf47dfabe081: Pushed
c53d956ebfec: Pushed
46a297e68c47: Pushed
6086e1b289d9: Pushed

cfb4ccdac258: Pushed
0.1: digest: sha256:c6592a589319665e3f9a91f13b3b96509da27ecf6eb785d741e5bda9771f7a81 size: 2635
2020/07/31 17:34:15 Successfully pushed image: testcontainerregistry50.azurecr.io/flask:0.1
2020/07/31 17:34:15 Step ID: build marked as successful (elapsed time in seconds: 38.677573)
2020/07/31 17:34:15 Populating digests for step ID: build...
2020/07/31 17:34:16 Successfully populated digests for step ID: build
2020/07/31 17:34:16 Step ID: push marked as successful (elapsed time in seconds: 51.497077)
2020/07/31 17:34:16 The following dependencies were found:
2020/07/31 17:34:16 
- image:
    registry: testcontainerregistry50.azurecr.io
    repository: flask
    tag: "0.1"
    digest: sha256:c6592a589319665e3f9a91f13b3b96509da27ecf6eb785d741e5bda9771f7a81
  runtime-dependency:
    registry: registry.hub.docker.com
    repository: library/python
    tag: "3"
    digest: sha256:c771865c1d02066d36748c97fcc98984fbaf86f5dde9d49e67e6ba882746c9bc
  git:
    git-head-revision: c8adf9c5b413c5f1340cc74e50030569c57d195b


Run ID: cfb was successful after 1m38s
Finished ACR Quick Task
[acr-push] $ /bin/sh -xe /tmp/jenkins6808860063926414046.sh
+ ls
+ pwd
/var/jenkins_home/workspace/acr-push
Finished: SUCCESS
